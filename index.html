<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Mentoring | Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <!-- LEFT SIDEBAR (BrightPath-style: narrow, icon-only) -->
    <aside class="sidebar">
      <div class="sidebar-brand">
        <span class="sidebar-logo-dot"></span>
        <span class="sidebar-title">Mentor</span>
      </div>
      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-page="mentoring" aria-label="Mentoring">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 14l9-5-9-5-9 5 9 5z"/>
            <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
          </svg>
          <span class="nav-label">Mentoring</span>
        </a>
        <a href="#" class="nav-item" data-page="sessions" aria-label="Sessions">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
            <line x1="16" y1="2" x2="16" y2="6"/>
            <line x1="8" y1="2" x2="8" y2="6"/>
            <line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
          <span class="nav-label">Sessions</span>
        </a>
        <a href="#" class="nav-item" data-page="mentors" aria-label="Mentors">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
          <span class="nav-label">Mentors</span>
        </a>
        <a href="#" class="nav-item" data-page="progress" aria-label="Progress">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="20" x2="18" y2="10"/>
            <line x1="12" y1="20" x2="12" y2="4"/>
            <line x1="6" y1="20" x2="6" y2="14"/>
          </svg>
          <span class="nav-label">Progress</span>
        </a>
        <a href="#" class="nav-item" data-page="chat" aria-label="Chat">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
          <span class="nav-label">Chat</span>
        </a>
        <a href="#" class="nav-item" data-page="settings" aria-label="Settings">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
          <span class="nav-label">Settings</span>
        </a>
        <a href="#" class="nav-item nav-item--admin" id="nav-admin-mentors" data-page="admin-mentors" aria-label="Assign mentors" style="display: none;">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
          <span class="nav-label">Assign mentors</span>
        </a>
      </nav>
      <div class="sidebar-footer">
        <a href="#" class="nav-item" aria-label="Help">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          <span class="nav-label">Help</span>
        </a>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main">
      <!-- TOP NAVBAR -->
      <header class="navbar">
        <div class="navbar-search">
          <input type="search" placeholder="Search" class="search-input" aria-label="Search">
          <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
        </div>
        <div class="navbar-actions">
          <div class="notify-wrap">
            <button type="button" class="btn-icon btn-notify" id="btn-notify" aria-label="Notifications">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
              </svg>
              <span class="notify-dot" id="notify-dot"></span>
            </button>
            <div class="notify-panel" id="notify-panel" aria-hidden="true">
              <div class="notify-panel-header">
                <span>Notifications</span>
                <button type="button" class="notify-mark-read" id="notify-mark-read">Mark all read</button>
              </div>
              <div class="notify-panel-list" id="notify-panel-list"></div>
            </div>
          </div>
          <a href="#" id="btn-logout" class="btn-logout">Logout</a>
          <button type="button" class="profile-block profile-block--btn" id="btn-profile" aria-label="Open profile">
            <div class="profile-avatar">
              <img id="nav-avatar" src="" alt="Profile" width="44" height="44">
            </div>
            <div class="profile-info">
              <span class="user-name" id="nav-user-name">User</span>
              <span class="user-handle" id="nav-user-handle">@student</span>
            </div>
          </button>
        </div>
      </header>

      <!-- MAIN SECTION -->
      <div class="content">
        <!-- Panel: Mentoring (default) -->
        <div class="content-panel active" id="panel-mentoring" data-page="mentoring">
        <h1 class="page-title">My courses</h1>
        <div class="filter-pills" id="filter-pills">
          <button type="button" class="pill pill--active" data-filter="">All courses</button>
          <button type="button" class="pill" data-filter="BSESC">BSESC</button>
          <button type="button" class="pill" data-filter="PCPEC">PCPEC</button>
          <button type="button" class="pill" data-filter="MDC">MDC</button>
          <button type="button" class="pill" data-filter="SC">SC</button>
          <button type="button" class="pill" data-filter="HSSM">HSSM</button>
          <button type="button" class="pill" data-filter="DM">DM</button>
          <button type="button" class="pill" data-filter="HR">HR</button>
          <button type="button" class="pill" data-filter="BC">BC</button>
        </div>

        <!-- Student: JOIN MEETING block (live sessions with Google Meet link) -->
        <section class="live-session-block" id="live-session-block">
          <h2 class="panel-title live-session-heading">Join your meeting</h2>
          <div id="live-session-list">
            <p class="text-muted" id="live-session-placeholder">No live meetings right now. When your mentor adds a Google Meet link to a session, it will appear here and in My next lessons.</p>
          </div>
        </section>

        <!-- Teacher: form to add Google Meet link to a session -->
        <section class="teacher-meet-link-section" id="teacher-meet-link-section" style="display: none;">
          <div class="sessions-panel">
            <h2 class="panel-title">Add Google Meet link to session</h2>
            <form id="teacher-meet-link-form" class="meet-link-form">
              <label for="meet-session-select">Session</label>
              <select id="meet-session-select" required>
                <option value="">Loading sessions...</option>
              </select>
              <label for="meet-link-input">Google Meet link</label>
              <input type="url" id="meet-link-input" placeholder="https://meet.google.com/xxxx-xxxx-xxx" required>
              <button type="submit" class="btn-continue">Save link & set live</button>
            </form>
            <p id="meet-link-message" class="text-muted" style="margin-top: 0.5rem;"></p>
          </div>
        </section>

        <!-- ROW 1: SEM-IV course cards (actual courses) -->
        <section class="cards-row cards-row--grid" id="cards-row" aria-label="SEM-IV courses"></section>

        <!-- ROW 2: My next lessons (list) + Recommendation card -->
        <section class="bottom-row">
          <div class="lessons-panel">
            <div class="panel-header">
              <h2 class="panel-title">My next lessons</h2>
              <a href="#" class="view-all-link">View all lessons</a>
            </div>
            <div class="lessons-list-wrap">
              <table class="sessions-table" id="sessions-table">
                <thead>
                  <tr>
                    <th>Session</th>
                    <th>Mentor</th>
                    <th>Duration</th>
                    <th>Join</th>
                  </tr>
                </thead>
                <tbody id="sessions-tbody">
                  <tr><td colspan="4" class="text-muted">Loading sessions...</td></tr>
                </tbody>
              </table>
            </div>
          </div>
          <aside class="recommendation-card recommendation-card--green">
            <span class="rec-badge">New course matching your interests</span>
            <span class="card-tag rec-tag">Design</span>
            <h3 class="rec-title">Advanced Typography for Digital Products</h3>
            <p class="rec-desc">They are already studying</p>
            <div class="rec-avatars">
              <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=a1" alt="" width="32" height="32">
              <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=a2" alt="" width="32" height="32">
              <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=a3" alt="" width="32" height="32">
              <span class="rec-avatars-plus">+100</span>
            </div>
            <button type="button" class="btn-cta btn-cta--orange" id="btn-more-details">More details</button>
          </aside>
        </section>
        </div>

        <!-- Panel: Sessions -->
        <div class="content-panel" id="panel-sessions" data-page="sessions">
          <h1 class="page-title">My sessions</h1>
          <div class="table-wrap">
            <table class="sessions-table" id="sessions-table-full">
              <thead><tr><th>Session</th><th>Mentor</th><th>Duration</th><th>Date</th><th>Join</th></tr></thead>
              <tbody id="sessions-tbody-full"></tbody>
            </table>
          </div>
        </div>

        <!-- Panel: Mentors -->
        <div class="content-panel" id="panel-mentors" data-page="mentors">
          <h1 class="page-title">My mentor</h1>
          <div class="mentor-info-card" id="mentor-info-card">
            <p class="text-muted">Loading...</p>
          </div>
        </div>

        <!-- Panel: Progress -->
        <div class="content-panel" id="panel-progress" data-page="progress">
          <h1 class="page-title">My progress</h1>
          <div class="progress-content" id="progress-content">
            <div class="progress-dashboard" id="progress-dashboard">
              <div class="progress-stats-row" id="progress-stats-row">
                <div class="progress-stat-card"><span class="progress-stat-value" id="stat-attended">0</span><span class="progress-stat-label">Sessions attended</span></div>
                <div class="progress-stat-card"><span class="progress-stat-value" id="stat-missed">0</span><span class="progress-stat-label">Sessions missed</span></div>
                <div class="progress-stat-card"><span class="progress-stat-value" id="stat-total">0</span><span class="progress-stat-label">Total sessions</span></div>
                <div class="progress-stat-card progress-stat-card--highlight"><span class="progress-stat-value" id="stat-percent">0%</span><span class="progress-stat-label">Attendance rate</span></div>
              </div>
              <div class="progress-chart-section">
                <h2 class="panel-title">Attendance rate</h2>
                <div class="progress-bar-chart-wrap">
                  <div class="progress-bar-fill" id="progress-rate-bar" style="width: 0%"></div>
                  <span class="progress-bar-label" id="progress-rate-label">0%</span>
                </div>
              </div>
              <div class="progress-chart-section">
                <h2 class="panel-title">Attendance trend (last 6 weeks)</h2>
                <div class="progress-trend-chart" id="progress-trend-chart"></div>
                <div class="progress-trend-labels" id="progress-trend-labels"></div>
              </div>
              <p class="text-muted progress-upload-hint" id="progress-upload-hint">Data will update when attendance is recorded. You can upload or sync data later.</p>
            </div>
          </div>
        </div>

        <!-- Panel: Chat -->
        <div class="content-panel" id="panel-chat" data-page="chat">
          <h1 class="page-title">Chat</h1>
          <div class="chat-layout" id="chat-layout">
            <aside class="chat-sidebar">
              <div class="chat-new-wrap">
                <button type="button" class="btn-continue chat-new-btn" id="chat-new-btn">New chat</button>
                <div class="chat-contacts-dropdown" id="chat-contacts-dropdown" style="display: none;">
                  <ul class="chat-contacts-list" id="chat-contacts-list"></ul>
                </div>
              </div>
              <div class="chat-conversations-list" id="chat-conversations-list">
                <p class="text-muted chat-placeholder">Loading conversations...</p>
              </div>
            </aside>
            <section class="chat-main">
              <div class="chat-empty" id="chat-empty">
                <p>Select a conversation or start a new chat.</p>
              </div>
              <div class="chat-thread" id="chat-thread" style="display: none;">
                <div class="chat-thread-header">
                  <button type="button" class="chat-back-btn" id="chat-back-btn" aria-label="Back to conversations">←</button>
                  <span class="chat-thread-title" id="chat-thread-title"></span>
                </div>
                <div class="chat-messages" id="chat-messages"></div>
                <form class="chat-send-form" id="chat-send-form">
                  <input type="text" class="chat-input" id="chat-input" placeholder="Type a message..." maxlength="2000" autocomplete="off">
                  <button type="submit" class="btn-continue chat-send-btn">Send</button>
                </form>
              </div>
            </section>
          </div>
        </div>

        <!-- Panel: Settings -->
        <div class="content-panel" id="panel-settings" data-page="settings">
          <h1 class="page-title">Settings</h1>
          <div class="settings-content">
            <label for="profile-picture-pref" class="settings-label">Profile picture</label>
            <select id="profile-picture-pref" class="settings-select">
              <option value="male">Male illustration</option>
              <option value="female">Female illustration</option>
            </select>
            <p class="text-muted" style="margin-top: 1rem;">More options coming soon.</p>
          </div>
        </div>

        <!-- Panel: Admin – Assign mentors to students (teacher-centric) -->
        <div class="content-panel" id="panel-admin-mentors" data-page="admin-mentors">
          <h1 class="page-title">Assign mentors to students</h1>
          <p class="text-muted" style="margin-bottom: 1.25rem;">Under each teacher, click &quot;Assign students&quot; to choose which students have that mentor.</p>
          <h2 class="panel-title">All teachers (mentors)</h2>
          <div class="table-wrap">
            <table class="sessions-table" id="admin-teachers-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Department</th>
                  <th>Designation</th>
                  <th>Assigned students</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="admin-teachers-tbody">
                <tr><td colspan="6" class="text-muted">Loading...</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal for course/recommendation detail -->
  <div class="modal-overlay" id="modal-overlay" aria-hidden="true">
    <div class="modal" id="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="modal-title"></h3>
        <button type="button" class="modal-close" id="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body" id="modal-body"></div>
    </div>
  </div>

  <!-- Modal: Assign students to teacher (admin) -->
  <div class="modal-overlay" id="assign-students-modal" aria-hidden="true">
    <div class="modal modal--wide" id="assign-students-modal-inner">
      <div class="modal-header">
        <h3 class="modal-title" id="assign-students-modal-title">Assign students</h3>
        <button type="button" class="modal-close" id="assign-students-modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <p class="text-muted" style="margin-bottom: 0.75rem;">Select students to assign to this mentor. You can select multiple.</p>
        <div class="assign-students-list" id="assign-students-list"></div>
        <p id="assign-students-message" class="text-muted" style="margin-top: 0.75rem;"></p>
        <button type="button" class="btn-continue btn-continue--lime" id="assign-students-submit" style="margin-top: 1rem;">Assign selected</button>
      </div>
    </div>
  </div>

  <!-- Profile modal: user details only -->
  <div class="modal-overlay" id="profile-card-modal" aria-hidden="true">
    <div class="modal modal--profile-card" id="profile-card-modal-inner">
      <div class="modal-header">
        <h3 class="modal-title">Profile</h3>
        <button type="button" class="modal-close" id="profile-card-modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body modal-body--profile-card">
        <div class="profile-card-details">
          <img id="profile-card-avatar" src="" alt="" width="80" height="80" class="profile-card-avatar-img">
          <h4 class="profile-card-name" id="profile-card-name">—</h4>
          <p class="profile-card-handle text-muted" id="profile-card-handle">—</p>
          <dl class="profile-card-meta">
            <dt>Email</dt>
            <dd id="profile-card-email">—</dd>
            <dt>Role</dt>
            <dd id="profile-card-role">—</dd>
          </dl>
        </div>
      </div>
    </div>
  </div>

  <script src="api.js"></script>
  <script src="script.js"></script>
</body>
</html>
